# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
  branches:
    include:
    - refs/heads/main
jobs:
- job: Job_1
  displayName: Agent job 1
  pool:
    vmImage: vs2017-win2016
  steps:
  - checkout: self
  - task: NodeTool@0
    displayName: Use Node 14.x
    inputs:
      versionSpec: 14.x
  - task: Npm@1
    displayName: Install Angular Cli
    inputs:
      command: custom
      verbose: false
      customCommand: install -g @angular/cli
  - task: Npm@1
    displayName: npm install
    inputs:
      verbose: false
  - task: Npm@1
    displayName: npm build
    inputs:
      command: custom
      verbose: false
      customCommand: run build
  - task: AzureRmWebAppDeployment@4
    displayName: 'Azure App Service Deploy: TicTacFront'
    inputs:
      ConnectedServiceName: 1350bce0-1786-4f86-9ac5-9aa2ca3bfd54
      WebAppName: TicTacFront
      Package: dist/TicTacFrontend
  - task: ArchiveFiles@2
    displayName: Zip Files
    enabled: False
    inputs:
      rootFolderOrFile: ./dist
  - task: PublishBuildArtifacts@1
    displayName: 'Publish Artifact: drop'
    enabled: False
